{{define "message" -}}
    {{template "head" . -}}
    {{- $data := .Data -}}
    {{- $tabs := list "unread" "read" "all"  -}}
    {{- $tabMap := dict "unread" (local "MessageUnread") "read" (local "MessageRead") "all" (local "All") -}}

    <div class="page-tab">
	<div class="tabs">
	    {{- range $tabs -}}
		<a class="tab{{if eq $data.Query.Tab . }} active{{end}}" href="/messages{{if ne . "unread"}}?tab={{.}}{{end}}">{{get $tabMap .}}</a>
	    {{- end -}}
	</div>
    </div>

    <style>
     .message-list{
	 padding-left: 1rem;
     }
     .message-list li{
	 margin-bottom: 0.5rem;
     }
    </style>
    
    <ul class="message-list">
	{{- range $data.List -}}
	    {{- $title := print "<a href='/articles/" .SourceArticle.Id "'>" .SourceArticle.DisplayTitle "</a>" -}}
	    <li>{{local "NewReply" "ArticleTitle" $title}}{{timeAgo .CreatedAt}}</li>
	{{- end -}}
	{{- placehold $data.List (print "<i class='text-lighten-2'>" (local "NoData") "</i>") -}}
    </ul>

    {{- $pagiData := dict "currPage" .Data.Query.Page "totalPage" .Data.Query.TotalPage "pathPrefix" "/messages"  "query" .RouteQuery -}}
    {{- template "pagination" $pagiData -}}

    {{template "foot" . -}}
{{end -}}
